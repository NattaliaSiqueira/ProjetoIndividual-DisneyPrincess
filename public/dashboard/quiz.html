<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Disney</title>

    <link rel="stylesheet" href="../css/dashboards.css">
</head>

<body>
    <h1 id="tituloQuiz">Descubra Qual Princesa é mais parecida com você</h1>
    <div alternativas id="div_alternativas" style="display: none;">
        <input type="radio" id="input_A" value="alternativaA" name="alternativa"> <label id="respostaA"></label>
        <input type="radio" id="input_B" value="alternativaB" name="alternativa"> <label id="respostaB"></label>
        <input type="radio" id="input_C" value="alternativaC" name="alternativa"> <label id="respostaC"></label>
        <input type="radio" id="input_D" value="alternativaD" name="alternativa"> <label id="respostaD"></label>
    </div>


    <br>
    <button onclick="proxima()" id="botaoQuiz">Começar Quiz</button>


</body>

</html>
<script>
    var contadorQuiz = 0;
    var listaPerguntas = ["1.Como você costuma agir diante de um desafio?", "2.O que você mais valoriza na vida?", "3.Como você reage quando alguém diz que você não é capaz?", "4.Qual dessas qualidades combina mais com você?", "5.Em um dia livre, o que você prefere fazer?", "6.Qual dessas frases te representa mais?", "7.Qual dessas frases te representa mais?", "8.Como descreveria seu jeito de se expressar?", "9.Qual ambiente mais combina com você?"];
    var listaRespostas = [['Sigo em frente com coragem.', 'Família', 'Provo que estão errados.', 'Determinação', 'Ler um livro ou aprender algo novo', '“Eu vou além do que esperam de mim.”', 'Faz qualquer coisa para proteger', 'Sincera e emocional', 'Floresta ou natureza'], ['Penso bastante antes de agir.', 'Liberdade', 'Ignoro e sigo meu próprio caminho.', 'Curiosidade', 'Explorar lugares novos', '“O mundo é muito grande para ficar parada.”', 'Usa inteligência e estratégia', 'Calma e compassiva', 'Castelo ou biblioteca'], ['Sigo meu coração.', 'Conhecimento', 'Fico chateada, mas continuo tentando.', 'Gentileza', 'Passar tempo com quem ama', '“A bondade sempre encontra um caminho.”', 'Coloca o coração à frente', 'Forte e objetiva', 'Praia e mar'], ['Procuro ajuda e trabalho em equipe.', 'Aventuras', 'Isso me motiva a trabalhar ainda mais.', 'Independência', 'Treinar, cozinhar ou trabalhar em um projeto', '“Eu faço meu próprio destino.”', 'Age sem pensar duas vezes', 'Criativa e curiosa', 'Cidade movimentada']];
    var iniciarQuiz = true;

    var moanaMulan = 0; // Você é corajosa, determinada e não tem medo de enfrentar desafios enormes.Sempre luta pelo que acredita e protege quem ama.
    var belaRapunzel = 0; //Você é curiosa, inteligente e vive em busca de conhecimento e novidades.Enxerga beleza onde ninguém mais vê.
    var cinderelaBrancaDeNeve = 0; //Gentil, doce e empática.Mesmo em dificuldades, mantém a bondade e acredita nas pessoas.
    var meridaTiana = 0; //Independente, forte e trabalhadora.Você faz seu próprio destino e não espera nada cair do céu.

    function proxima() {
        botaoQuiz.innerHTML = "Proxima";
        div_alternativas.style.display = "flex";


        var alternativaA = input_A.checked;
        var alternativaB = input_B.checked;
        var alternativaC = input_C.checked;
        var alternativaD = input_D.checked;


        if (contadorQuiz < 9) {

            if (alternativaA || alternativaB || alternativaC || alternativaD || iniciarQuiz) {

                var enunciadoA = document.getElementById("respostaA");
                var enunciadoB = document.getElementById("respostaB");
                var enunciadoC = document.getElementById("respostaC");
                var enunciadoD = document.getElementById("respostaD");


                var respostaA = listaRespostas[0][contadorQuiz];
                var respostaB = listaRespostas[1][contadorQuiz];
                var respostaC = listaRespostas[2][contadorQuiz];
                var respostaD = listaRespostas[3][contadorQuiz];


                tituloQuiz.innerHTML = listaPerguntas[contadorQuiz];

                enunciadoA.innerHTML = respostaA;
                enunciadoB.innerHTML = respostaB;
                enunciadoC.innerHTML = respostaC;
                enunciadoD.innerHTML = respostaD;

                contadorQuiz++;
            } else {
                alert("Selecione uma alternativa")
            }
        } else {

            div_alternativas.style.display = "none";
            botaoQuiz.innerHTML = "Finalizar Quiz";
            botaoQuiz.onclick = finalizar;





        }
        iniciarQuiz = false;


        if (alternativaA) {
            moanaMulan += 3;
        } else if (alternativaB) {
            belaRapunzel += 3;
        } else if (alternativaC) {
            cinderelaBrancaDeNeve += 3;
        } else {
            meridaTiana += 3;
        }




    }

    function finalizar() {
        var princesa = "";
        var maior = Math.max(moanaMulan, belaRapunzel, cinderelaBrancaDeNeve, meridaTiana);

        if (maior == moanaMulan) princesa = "Moana/Mulan";
        if (maior == belaRapunzel) princesa = "Bela/Rapunzel";
        if (maior == cinderelaBrancaDeNeve) princesa = "Cinderela/Branca de Neve";
        if (maior == meridaTiana) princesa = "Merida/Tiana";

        fetch("/quiz/salvar", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                idUsuario: sessionStorage.ID_USUARIO,
                princesa: princesa,
                moanaMulan: moanaMulan,
                belaRapunzel: belaRapunzel,
                cinderelaBrancaNeve: cinderelaBrancaDeNeve,
                meridaTiana: meridaTiana
            })
        })
            .then(r => {
                if (r.ok) {
                    alert("Resultado salvo com sucesso!");
                    window.location.href = "dashboard.html";
                }
            });
    }

</script>